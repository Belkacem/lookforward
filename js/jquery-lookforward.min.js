/**
 * Modules in this bundle
 * @license
 *
 * lookforward:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: appleple
 *   homepage: http://developer.a-blogcms.jp
 *   version: 0.0.8
 *
 * es6-object-assign:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: Rub√©n Norte <rubennorte@gmail.com>
 *   homepage: https://github.com/rubennorte/es6-object-assign
 *   version: 1.1.0
 *
 * es6-promise-polyfill:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: Roman Dvornov <rdvornov@gmail.com>
 *   version: 1.2.0
 *
 * This header is generated by licensify (https://github.com/twada/licensify)
 */
!function e(t,n,o){function r(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var f=n[a]={exports:{}};t[a][0].call(f.exports,function(e){var n=t[a][1][e];return r(n||e)},f,f.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,t,n){"use strict";function o(e,t){if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),o=1;o<arguments.length;o++){var r=arguments[o];if(void 0!==r&&null!==r)for(var i=Object.keys(Object(r)),a=0,s=i.length;a<s;a++){var c=i[a],u=Object.getOwnPropertyDescriptor(r,c);void 0!==u&&u.enumerable&&(n[c]=r[c])}}return n}function r(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:o})}t.exports={assign:o,polyfill:r}},{}],2:[function(e,t,n){(function(e){!function(e){function t(e){return"[object Array]"===Object.prototype.toString.call(e)}function o(){for(var e=0;e<L.length;e++)L[e][0](L[e][1]);L=[],w=!1}function r(e,t){L.push([e,t]),w||(w=!0,_(o,0))}function i(e,t){function n(e){c(t,e)}function o(e){f(t,e)}try{e(n,o)}catch(e){o(e)}}function a(e){var t=e.owner,n=t.state_,o=t.data_,r=e[n],i=e.then;if("function"==typeof r){n=k;try{o=r(o)}catch(e){f(i,e)}}s(i,o)||(n===k&&c(i,o),n===E&&f(i,o))}function s(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"==typeof t)){var o=t.then;if("function"==typeof o)return o.call(t,function(o){n||(n=!0,t!==o?c(e,o):u(e,o))},function(t){n||(n=!0,f(e,t))}),!0}}catch(t){return n||f(e,t),!0}return!1}function c(e,t){e!==t&&s(e,t)||u(e,t)}function u(e,t){e.state_===m&&(e.state_=b,e.data_=t,r(l,e))}function f(e,t){e.state_===m&&(e.state_=b,e.data_=t,r(v,e))}function d(e){var t=e.then_;e.then_=void 0;for(var n=0;n<t.length;n++)a(t[n])}function l(e){e.state_=k,d(e)}function v(e){e.state_=E,d(e)}function h(e){if("function"!=typeof e)throw new TypeError("Promise constructor takes a function argument");if(this instanceof h==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],i(e,this)}var p=e.Promise,y=p&&"resolve"in p&&"reject"in p&&"all"in p&&"race"in p&&function(){var e;return new p(function(t){e=t}),"function"==typeof e}();void 0!==n&&n?(n.Promise=y?p:h,n.Polyfill=h):"function"==typeof define&&define.amd?define(function(){return y?p:h}):y||(e.Promise=h);var w,m="pending",b="sealed",k="fulfilled",E="rejected",g=function(){},_="undefined"!=typeof setImmediate?setImmediate:setTimeout,L=[];h.prototype={constructor:h,state_:m,then_:null,data_:void 0,then:function(e,t){var n={owner:this,then:new this.constructor(g),fulfilled:e,rejected:t};return this.state_===k||this.state_===E?r(a,n):this.then_.push(n),n.then},catch:function(e){return this.then(null,e)}},h.all=function(e){var n=this;if(!t(e))throw new TypeError("You must pass an array to Promise.all().");return new n(function(t,n){for(var o,r=[],i=0,a=0;a<e.length;a++)o=e[a],o&&"function"==typeof o.then?o.then(function(e){return i++,function(n){r[e]=n,--i||t(r)}}(a),n):r[a]=o;i||t(r)})},h.race=function(e){var n=this;if(!t(e))throw new TypeError("You must pass an array to Promise.race().");return new n(function(t,n){for(var o,r=0;r<e.length;r++)o=e[r],o&&"function"==typeof o.then?o.then(t,n):t(o)})},h.resolve=function(e){var t=this;return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},h.reject=function(e){return new this(function(t,n){n(e)})}}("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){"use strict";var o=e("../index"),r=function(e){e.fn.smartPhoto=function(e){return"strings"==typeof e||new o(this.selector,e),this}};if("function"==typeof define&&define.amd)define(["jquery"],r);else{var i=window.jQuery?window.jQuery:window.$;void 0!==i&&r(i)}t.exports=r},{"../index":5}],4:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=e("../lib/util"),a=e("es6-object-assign").assign,s={classNames:{LookForward:"lookforward",LookForwardBody:"lookforward-body",LookForwardInner:"lookforward-inner",LookForwardClose:"lookforward-close",LookForwardCloseBtn:"lookforward-close-btn",LookForwardHeader:"lookforward-header",LookForwardFooter:"lookforward-footer"},transitionEnter:"",transitionLeave:"",scrapedArea:"body",useHistoryApi:!0},c=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this.options=a({},s,r),this.id=(0,i.getUniqId)();var c="string"==typeof t?document.querySelectorAll(t):t,u=document.querySelector("body");this.currentUrl=location.href,this.selector=t,c&&([].forEach.call(c,function(e){n.addClickEvent(e)}),(0,i.append)(u,'<div id="'+this.id+'"></div>'),window.history&&this.options.useHistoryApi&&window.addEventListener("popstate",function(e){var t=e.state;if(t&&t.pushed){var o=t.transitionEnter,r=t.transitionLeave,i=n.buildHtml(t.html,o,r);n.removeModal(!0).then(function(){n.addModal(i)})}else n.removeModal().then(function(){u.style.overflow="",n._fireEvent("closeAll")})}))}return r(e,[{key:"on",value:function(e,t){var n=this;document.querySelector("#"+this.id).addEventListener(e,function(e){t.call(n,e)})}},{key:"addClickEvent",value:function(e){var t=this;e.addEventListener("click",function(n){n.preventDefault();var o=e.getAttribute("href"),r=e.dataset.transitionEnter||t.options.transitionEnter,a=e.dataset.transitionLeave||t.options.transitionLeave;(0,i.fetch)(o).then(function(e){var n=e.querySelector(t.options.scrapedArea);if(n){var i=t.buildHtml(n.innerHTML,r,a);t.removeModal(!0).then(function(){t.addModal(i)}),window.history&&t.options.useHistoryApi&&window.history.pushState({pushed:!0,html:n.innerHTML,transitionEnter:r,transitionLeave:a},"",o)}})})}},{key:"addModal",value:function(e){var t=this,n=this.id,o=this.selector,r=document.querySelector("body"),a=document.querySelector("#"+n);r.style.overflow="hidden",(0,i.append)(a,e);var s=document.querySelectorAll("#"+n+" .js-lookforward-close-btn");if([].forEach.call(s,function(e){e.addEventListener("click",function(){window.history&&t.options.useHistoryApi?window.history.back():t.removeModal()})}),"string"==typeof o){var c=document.querySelectorAll("#"+n+" "+o);[].forEach.call(c,function(e){t.addClickEvent(e)})}this._fireEvent("open")}},{key:"removeModal",value:function(e){var t=this;return new Promise(function(n){var o=t.options.classNames,r=document.querySelector("#"+t.id+" [data-root]");document.querySelector("body");return r?e?(n(),void setTimeout(function(){(0,i.remove)(r),t._fireEvent("close")},300)):((0,i.addClass)(r,o.LookForwardClose),void setTimeout(function(){(0,i.remove)(r),t._fireEvent("close"),n()},300)):void n()})}},{key:"buildHtml",value:function(e,t,n){var o=this.options.classNames;return'\n      <div class="'+o.LookForward+'" data-root>\n        <div class="'+o.LookForwardBody+'">\n          <div class="'+o.LookForwardHeader+'">\n            <button class="'+o.LookForwardCloseBtn+' js-lookforward-close-btn"></button>\n          </div>\n          <div class="'+o.LookForwardInner+" _enter-"+t+" _leave-"+n+'">\n            '+e+'\n          </div>\n          <div class="'+o.LookForwardFooter+'">\n          </div>\n        </div>\n      </div>\n    '}},{key:"_fireEvent",value:function(e){var t=document.querySelector("#"+this.id);(0,i.triggerEvent)(t,e)}}]),e}();n.default=c,t.exports=n.default},{"../lib/util":6,"es6-object-assign":1}],5:[function(e,t,n){"use strict";t.exports=e("./core/")},{"./core/":4}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("es6-promise-polyfill").Promise;n.fetch=function(e){return new o(function(t,n){var o=new XMLHttpRequest;o.onload=function(){t(o.response)},o.onerror=function(){n()},o.open("GET",e),o.responseType="document",o.send()})},n.append=function(e,t){var n=new DOMParser,o=n.parseFromString(t,"text/html");e.appendChild(o.querySelector("body").childNodes[0])},n.getUniqId=function(){return(Date.now().toString(36)+Math.random().toString(36).substr(2,5)).toUpperCase()},n.remove=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},n.addClass=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},n.triggerEvent=function(e,t,n){var o=void 0;window.CustomEvent?o=new CustomEvent(t,{cancelable:!0}):(o=document.createEvent("CustomEvent"),o.initCustomEvent(t,!1,!1,n)),e.dispatchEvent(o)}},{"es6-promise-polyfill":2}]},{},[3]);